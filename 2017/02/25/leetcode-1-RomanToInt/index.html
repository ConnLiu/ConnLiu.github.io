<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Simple is a pleasure."><title>leetcode-1-RomanToInt | Leroy</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.1"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">leetcode-1-RomanToInt</h1><a id="logo" href="/.">Leroy</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/history/"><i class="fa fa-history"> 历史</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">leetcode-1-RomanToInt</h1><div class="post-meta">Feb 25, 2017<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><h2 id="Problem"><a href="#Problem" class="headerlink" title="Problem"></a>Problem</h2><p>Given a roman numeral, convert it to an integer.</p>
<p>Input is guaranteed to be within the range from 1 to 3999.</p>
<p><a href="https://leetcode.com/problems/roman-to-integer/?tab=Description" target="_blank" rel="external">原题链接</a></p>
<h2 id="My-Solution"><a href="#My-Solution" class="headerlink" title="My Solution"></a>My Solution</h2><ul>
<li><p>第一感觉的歧途</p>
<p>  第一眼看到这道题，就想到了2016-12的csp第二道工资计算题，觉得似乎正着算比较麻烦（即通过罗马数字直接得到阿拉伯数字，因为考虑到罗马数字中有很多不同字母），而如果反过来通过阿拉伯数字得到罗马数字就非常简单。</p>
<p>  例如，对于阿拉伯数字 1999，只要分别得到千位、百位、十位、个位数字，再分别转换为罗马数字，最后拼接起来即可。</p>
<p>  于是乎，抱着 “正难则反” 的策略，我兴致勃勃地写了一个for循环，从1-3999遍历得到罗马数字，其中只要得到一个与输入罗马数字相同的字符串就停下来，也就得到了它的阿拉伯数字。</p>
<p>  但是！！！</p>
<p>  <img src="http://liukun.tech/pic/leetcode-1-TimeOut.png" alt=""></p>
<p>  一脸懵逼。我这么思路清晰、优美的代码居然超时了。</p>
<p>  <img src="http://liukun.tech/pic/leetcode-1-TimeOut_code.png" alt=""></p>
<p>  不过没关系，容我分析一波。既然它说我的代码超时了，又不告诉我时间用了多少就算超了，那我只好在自己电脑跑一下并输出用时。</p>
<p>  <img src="http://liukun.tech/pic/leetcode-1-TimeOut_myC.png" alt=""></p>
<p>  一看吓一跳，居然用时0ms，一开始我都是不信的，然后又跑了好几次，还换了计时的方法，最后发现结果都是0ms（只有一次是1ms）。后来还了解到clock()方式计时精确度一般在10ms左右，然后这里我测的时间都是0ms，显然不妥，于是，再找了一种更精确的计时方式，得到如下</p>
<p>  <img src="http://liukun.tech/pic/leetcode-1-CaculTime.png" alt=""></p>
<p>  这样看来用时并不多，那结论就是leetcode的OJ给跑测试用例的cpu不咋样，甚至不如我的电脑。。。虽然这个结论是我始料未及的，但是事实摆在这里</p>
</li>
<li><p>那就正面解决吧</p>
<p>  既然不能用每个阿拉伯数字都试一试，那就直接对输入的罗马数字进行处理吧。</p>
<p>  分析一下，发现千位只会出现 M ，百位只会出现 C、D、M ，类似地分析出十位、个位，那就依次找到罗马数字中的各个数位，再进行转换即可咯。（这时候发现，正面处理也是一点都不难。。。怪不得这是一道easy的题目， 0 0 ）</p>
<p>  三下五除二，就写出了如下代码，然后就AC了，很开心。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">   <span class="keyword">int</span> ret = <span class="number">0</span>;</div><div class="line">   <span class="keyword">char</span>* p[<span class="number">4</span>][<span class="number">10</span>] = &#123;</div><div class="line">       &#123; <span class="string">""</span>, <span class="string">"X"</span>, <span class="string">"XX"</span>, <span class="string">"XXX"</span>, <span class="string">"XL"</span>, <span class="string">"L"</span>, <span class="string">"LX"</span>, <span class="string">"LXX"</span>, <span class="string">"LXXX"</span>, <span class="string">"XC"</span> &#125;,</div><div class="line">       &#123; <span class="string">""</span>, <span class="string">"I"</span>, <span class="string">"II"</span>, <span class="string">"III"</span>, <span class="string">"IV"</span>, <span class="string">"V"</span>, <span class="string">"VI"</span>, <span class="string">"VII"</span>, <span class="string">"VIII"</span>, <span class="string">"IX"</span> &#125;,</div><div class="line">       &#123; <span class="string">""</span>, <span class="string">"C"</span>, <span class="string">"CC"</span>, <span class="string">"CCC"</span>, <span class="string">"CD"</span>, <span class="string">"D"</span>, <span class="string">"DC"</span>, <span class="string">"DCC"</span>, <span class="string">"DCCC"</span>, <span class="string">"CM"</span> &#125;,</div><div class="line">       &#123; <span class="string">""</span>, <span class="string">"M"</span>, <span class="string">"MM"</span>, <span class="string">"MMM"</span>&#125;</div><div class="line">   &#125;;</div><div class="line">   <span class="keyword">int</span> i = <span class="number">0</span>;</div><div class="line">   <span class="keyword">while</span>(s[i] == <span class="string">'M'</span>)&#123; <span class="comment">// thousand</span></div><div class="line">       i++;</div><div class="line">       ret += <span class="number">1000</span>;</div><div class="line">&#125;</div><div class="line"><span class="keyword">int</span> j = i;  <span class="comment">// hundred</span></div><div class="line"><span class="keyword">while</span>(s[j] == <span class="string">'C'</span> || s[j] == <span class="string">'D'</span> || s[j] == <span class="string">'M'</span>)&#123;</div><div class="line">	j++;</div><div class="line">&#125;</div><div class="line"><span class="built_in">string</span> tmp;</div><div class="line"><span class="keyword">if</span>( j != i)&#123;</div><div class="line">    tmp = s.substr(i,j-i);</div><div class="line">    i = j;</div><div class="line">   	j = <span class="number">1</span>;</div><div class="line">   	<span class="keyword">while</span>(tmp != p[<span class="number">2</span>][j])&#123;</div><div class="line">		j++;</div><div class="line">   	&#125;;</div><div class="line">	<span class="keyword">if</span>(j!=<span class="number">10</span>)</div><div class="line">  			ret = ret + j*<span class="number">100</span>;</div><div class="line">   	j = i;   </div><div class="line">&#125;</div><div class="line">	        <span class="comment">// ten-s</span></div><div class="line"><span class="keyword">while</span>(s[j] == <span class="string">'X'</span> || s[j] == <span class="string">'L'</span> || s[j] == <span class="string">'C'</span>)&#123;</div><div class="line">	j++;</div><div class="line">&#125;</div><div class="line"><span class="keyword">if</span>(j != i)&#123;</div><div class="line">    tmp = s.substr(i,j-i);</div><div class="line">   	i = j;</div><div class="line">   	j = <span class="number">1</span>;</div><div class="line">   	<span class="keyword">while</span>(tmp != p[<span class="number">1</span>][j])&#123;</div><div class="line">   		j++;</div><div class="line">   	&#125;;</div><div class="line">   	<span class="keyword">if</span>(j!=<span class="number">10</span>)</div><div class="line">   		ret = ret + j*<span class="number">10</span>;</div><div class="line">   	j = i;   </div><div class="line">&#125;	</div><div class="line">               <span class="comment">// last-digit</span></div><div class="line"><span class="keyword">while</span>(s[j] == <span class="string">'I'</span> || s[j] == <span class="string">'V'</span> || s[j] == <span class="string">'X'</span>)&#123;</div><div class="line">	j++;</div><div class="line">&#125;</div><div class="line"><span class="keyword">if</span>(j != i)&#123;</div><div class="line">    tmp = s.substr(i,j-i);</div><div class="line">   	i = j;</div><div class="line">   	j = <span class="number">1</span>;</div><div class="line">   	<span class="keyword">while</span>(tmp != p[<span class="number">0</span>][j])&#123;</div><div class="line">   		j++;</div><div class="line">   	&#125;;</div><div class="line">   	<span class="keyword">if</span>(j!=<span class="number">10</span>)</div><div class="line">   		ret = ret + j;    </div><div class="line">&#125;</div><div class="line">	</div><div class="line">   <span class="keyword">return</span> ret;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>然后我又把这个代码在自己电脑跑了一下，计算用时仅0.00669372ms（这个计时其实也有1ms左右的误差，但这么多不精确小数哪里来的我也不知道，觉得下次要专门研究一下计时函数），确实是比刚才第一种方法快了很多。</p>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><blockquote>
<p> stay hungry, stay foolish</p>
</blockquote>
<p>伟大如乔布斯也明白向他人学习的重要性，何况于我呢！</p>
<p>于是乎，我又孜孜不倦地去看了一看别人写的代码。</p>
<h3 id="the-first"><a href="#the-first" class="headerlink" title="the first"></a>the first</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//count every Symbol and add its value to the sum, and </span></div><div class="line"><span class="comment">//minus the extra part of special cases.</span></div><div class="line">    <span class="keyword">int</span> sum=<span class="number">0</span>;</div><div class="line">    <span class="keyword">if</span>(s.indexOf(<span class="string">"IV"</span>)!=<span class="number">-1</span>)&#123;sum-=<span class="number">2</span>;&#125;</div><div class="line">    <span class="keyword">if</span>(s.indexOf(<span class="string">"IX"</span>)!=<span class="number">-1</span>)&#123;sum-=<span class="number">2</span>;&#125;</div><div class="line">    <span class="keyword">if</span>(s.indexOf(<span class="string">"XL"</span>)!=<span class="number">-1</span>)&#123;sum-=<span class="number">20</span>;&#125;</div><div class="line">    <span class="keyword">if</span>(s.indexOf(<span class="string">"XC"</span>)!=<span class="number">-1</span>)&#123;sum-=<span class="number">20</span>;&#125;</div><div class="line">    <span class="keyword">if</span>(s.indexOf(<span class="string">"CD"</span>)!=<span class="number">-1</span>)&#123;sum-=<span class="number">200</span>;&#125;</div><div class="line">    <span class="keyword">if</span>(s.indexOf(<span class="string">"CM"</span>)!=<span class="number">-1</span>)&#123;sum-=<span class="number">200</span>;&#125;</div><div class="line">    </div><div class="line">    <span class="keyword">char</span> c[]=s.toCharArray();</div><div class="line">    <span class="keyword">int</span> count=<span class="number">0</span>;</div><div class="line">    </div><div class="line">    <span class="keyword">for</span>(;count&lt;=s.length()<span class="number">-1</span>;count++)&#123;</div><div class="line">        <span class="keyword">if</span>(c[count]==<span class="string">'M'</span>) sum+=<span class="number">1000</span>;</div><div class="line">        <span class="keyword">if</span>(c[count]==<span class="string">'D'</span>) sum+=<span class="number">500</span>;</div><div class="line">        <span class="keyword">if</span>(c[count]==<span class="string">'C'</span>) sum+=<span class="number">100</span>;</div><div class="line">        <span class="keyword">if</span>(c[count]==<span class="string">'L'</span>) sum+=<span class="number">50</span>;</div><div class="line">        <span class="keyword">if</span>(c[count]==<span class="string">'X'</span>) sum+=<span class="number">10</span>;</div><div class="line">        <span class="keyword">if</span>(c[count]==<span class="string">'V'</span>) sum+=<span class="number">5</span>;</div><div class="line">        <span class="keyword">if</span>(c[count]==<span class="string">'I'</span>) sum+=<span class="number">1</span>;</div><div class="line">       </div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> sum;</div></pre></td></tr></table></figure>
<p>嗯。。。</p>
<p>这代码简单、明了、易懂，即使愚钝如我，也在看完之后立刻明白了它的原理，精确的抓住了罗马数字的特性！</p>
<p>对于I、V、X、L、C、D、M这些构成罗马数字的符号，每个符号都是代表了一个数值，并且对于VI、LX等，完全可以分别把每个单独的符号所代表的数值加起来；唯一例外的是 IV、IX、XL、XC、CD、CM这几个，因为他们小数值的符号出现在前面，而大数值的符号出现在后面，这样就不是单独加起来能够正确表达了，所以对于这些特例，只需要在前面就处理一下即可。</p>
<h3 id="The-second"><a href="#The-second" class="headerlink" title="The second"></a>The second</h3><p>而这第二个解法则是更加简单了，可是易读性却。。。。</p>
<p>不过，我略加思索，便明白了。嘿嘿(●ˇ∀ˇ●)</p>
<p>其实，就是把上一个解法加工了一下罢了，正是这句我刚说过的话启发了我：IV、IX、XL、XC、CD、CM这几个，因为他们小数值的符号出现在前面，而大数值的符号出现在后面，这样就不是单独加起来能够正确表达了。</p>
<p>在这个解法中，<strong>依据前一个符号与后一个符号表示数值的大小关系</strong>，来得到他们联合在一起表示的正确的值是多少。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//Problem is simpler to solve by working the string from</span></div><div class="line"><span class="comment">//back to front and using a map. Runtime speed is 88 ms.</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">romanToInt</span><span class="params">(<span class="built_in">string</span> s)</span> </span></div><div class="line">&#123;</div><div class="line">    <span class="built_in">unordered_map</span>&lt;<span class="keyword">char</span>, <span class="keyword">int</span>&gt; T = &#123; &#123; <span class="string">'I'</span> , <span class="number">1</span> &#125;,</div><div class="line">                                   &#123; <span class="string">'V'</span> , <span class="number">5</span> &#125;,</div><div class="line">                                   &#123; <span class="string">'X'</span> , <span class="number">10</span> &#125;,</div><div class="line">                                   &#123; <span class="string">'L'</span> , <span class="number">50</span> &#125;,</div><div class="line">                                   &#123; <span class="string">'C'</span> , <span class="number">100</span> &#125;,</div><div class="line">                                   &#123; <span class="string">'D'</span> , <span class="number">500</span> &#125;,</div><div class="line">                                   &#123; <span class="string">'M'</span> , <span class="number">1000</span> &#125; &#125;;</div><div class="line">                                   </div><div class="line">   <span class="keyword">int</span> sum = T[s.back()];</div><div class="line">   <span class="keyword">for</span> (<span class="keyword">int</span> i = s.length() - <span class="number">2</span>; i &gt;= <span class="number">0</span>; --i) </div><div class="line">   &#123;</div><div class="line">       <span class="keyword">if</span> (T[s[i]] &lt; T[s[i + <span class="number">1</span>]])</div><div class="line">       &#123;</div><div class="line">           sum -= T[s[i]];</div><div class="line">       &#125;</div><div class="line">       <span class="keyword">else</span></div><div class="line">       &#123;</div><div class="line">           sum += T[s[i]];</div><div class="line">       &#125;</div><div class="line">   &#125;</div><div class="line">   </div><div class="line">   <span class="keyword">return</span> sum;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol>
<li>思维要开阔，要多想想数据的特点，才能得到解题的关键点；</li>
<li>C++的定时函数需要研究一下；</li>
<li>我现在使用的还只是笨方法，继续加油吧 (ง •_•)ง</li>
</ol>
</div><script type="text/javascript" src="/js/share.js?v=0.0.1" async></script><a data-url="http://yoursite.com/2017/02/25/leetcode-1-RomanToInt/" data-id="cizl5wpha0002j8vkn8kzpsye" class="article-share-link">分享到</a><div class="tags"><a href="/tags/leetcode/">leetcode</a></div><div class="post-nav"><a href="/2017/02/20/AsyncTask/" class="next">AsyncTask使用简介</a></div></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/大学/">大学</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a> <a href="/tags/start/" style="font-size: 15px;">start</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/02/25/leetcode-1-RomanToInt/">leetcode-1-RomanToInt</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/20/AsyncTask/">AsyncTask使用简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/07/First-page/">First page</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://milkxie.com/" title="Milk Shieh" target="_blank">Milk Shieh</a><ul></ul><a href="http://zekai.tech/" title="ZeKai" target="_blank">ZeKai</a><ul></ul><a href="http://pfas1995.cn/" title="pfas1995" target="_blank">pfas1995</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Leroy.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.1" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.1" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.1"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.1"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.1"></script></div></body></html>